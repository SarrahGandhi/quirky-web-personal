extends layout

block content
  .container-manage 
    .container-fluid-manage
      h1 
        a(href="/") The Quirky Web
      include navside

    //- h2 Manage Websites
    //- h2 TODO: List All Websites
    div#list

  script.

    (async function () {

      const response = await fetch('/api/sites', {
        method: 'GET',
      });

      result = await response.json();

      const list = document.getElementById("list");

      for(let i in result){

        var {_id, name, url, author, github, image, approved} = result[i];

        console.log(image);

        list.innerHTML += "<div class='site-box'>" + 
          "<a href=\"" + url + "\">" + 
          "<img src=\"/api/sites/" + _id + "/image\" width=\"200\">" + 
          "</a>" + 
          "<p>" + 
          "<a href=\"" + url + "\"><i class=\"fa-solid fa-link\"></i></a>" +
          "<a href=\"" + github + "\"><i class=\"fa-brands fa-github\"></i></a>" +
          "<br>" + name + 
          "<br>" + author + 
          "</p>" + 
          "<div #approve> Approved=" + approved + "</div>" +
          "</div>";
      }

    })();
