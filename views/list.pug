extends layout

block content
  .containerlist
    .container-fluid-list
      h1.main_head 
        a(href="/") The Quirky Web
      include navside
    h2 Quirky Web List
    div#list

  script.

    (async function () {

      const response = await fetch('/api/sites', {
        method: 'GET',
      });

      result = await response.json();

      const list = document.getElementById("list");

      for(let i in result){

        let {_id, name, url, author, github, image, approved} = result[i];

        console.log(image);
        if(approved){

        list.innerHTML += "<div class='site-box'>" + 
          "<a href=\"" + url + "\">" + 
          "<img src=\"/api/sites/" + _id + "/image\" width=\"200\">" + 
          "</a>" + 
          "<p>" + 
          "<a href=\"" + url + "\"><i class=\"fa-solid fa-link\"></i></a>" +
          "<a href=\"" + github + "\"><i class=\"fa-brands fa-github\"></i></a>" +
          "<br>" + name + 
          "<br>" + author + 
          "</p>" + 
          "</div>";
        }

      }

    })();