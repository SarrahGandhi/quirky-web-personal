extends layout

block content
  .container
    .container-fluid-home
      h1.main_head
        a#home(href="/") The Quirky Web

    .container-nav
      include nav

    //- h2 TODO: Random Website Displayed Here
    div#random

  script.

    (async function () {

      const response = await fetch('/api/sites', {
        method: 'GET',
      });

      result = await response.json();

      const list = document.getElementById("random");

      for(let i in result){

        let {_id, name, url, author, github, image, approved} = result[i];

        console.log(image);

        list.innerHTML += "<div class='random-box'>" + 
          "<a href=\"" + url + "\">" + 
          "<img src=\"/api/sites/" + _id + "/image\" width=\"200\">" + 
          "</a>" + 
          "<p>" + 
          "<a href=\"" + url + "\"><i class=\"fa-solid fa-link\"></i></a>" +
          "<a href=\"" + github + "\"><i class=\"fa-brands fa-github\"></i></a>" +
          "<br>" + name + 
          "<br>" + author + 
          "</p>" + 
          "</div>";

      }

    })();


